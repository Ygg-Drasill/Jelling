meta {
  name: auth
  type: http
  seq: 1
}

post {
  url: {{protocol}}://{{address}}:{{port}}{{baseEndpoint}}/account/auth
  body: json
  auth: bearer
}

auth:bearer {
  token: {{sessionToken}}
}

body:json {
  {
    "username": "alex",
    "password": "1234"
  }
}

script:post-response {
  if (res.status < 400 && res.body.token != undefined && res.body.token != null) {
    bru.setEnvVar("sessionToken", res.body.token)
  }
}
